<!DOCTYPE html>
<html>

<!-- Mirrored from developer.alexanderklimov.ru/android/theory/vibrator.php by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Jul 2014 14:51:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta charset=utf-8>
<title>Android: Виброзвонок</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Le styles -->
<link href="../../assets/css/bootstrap.css" rel="stylesheet">
<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 10px;
  }
  .sidebar-nav {
    padding: 9px 0;
  }
</style>
	
<link href="../../assets/css/bootstrap-responsive.css" rel="stylesheet">
	
   <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    
<link rel="icon" href="../../favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon" />   
</head>

<body>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
        
        <div class="nav-collapse collapse">
          <p class="navbar-text pull-right">
			<a data-toggle="modal" href="#myModal" class="navbar-link">Гость</a>
          </p>
          <ul class="nav">
            
          </ul>
        </div><!--/.nav-collapse -->
        </div>
    </div>
</div>

<div class="row-fluid">
    <div class="span5">
        <p>
		<a href="http://developer.alexanderklimov.ru/"><img src="../../images/header.png" alt="Сайт разработчика Александр Климова" border="0"/></a>
		</p>
    
    </div><!--/span-->
    
	<div class="span5">
        <p style="color:green; font-style: italic; font-size: small;">
		/* Моя кошка замечательно разбирается в программировании. Стоит мне объяснить проблему ей - и все становится ясно. */<br>John Robbins, Debugging Applications, Microsoft Press, 2000
		</p>
    </div><!--/span-->
    
	<div class="span2">
        <p>
		<a href="http://feeds.feedburner.com/alexanderklimov/VJcl"><img src="../../kot-2-rss-100.png" border="0"></a>
		</p>
    </div><!--/span-->
</div><!--/row-->	
<div class="clearfix"></div>
	
<noindex><!--Rating@Mail.ru COUNTER--><script language="JavaScript" type="text/javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer)
js=10//--></script><script language="JavaScript1.1" type="text/javascript"><!--
a+=';j='+navigator.javaEnabled()
js=11//--></script><script language="JavaScript1.2" type="text/javascript"><!--
s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
js=12//--></script><script language="JavaScript1.3" type="text/javascript"><!--
js=13//--></script><script language="JavaScript" type="text/javascript"><!--
d.write('<IMG src="http://db.c7.b3.a0.top.mail.ru/counter'+
'?id=228158;js='+js+a+';rand='+Math.random()+
'" height="1" width="1" alt="top.mail.ru" border="0" />')
if(11<js)d.write('<'+'!-- ')//--></script><noscript><img
src="http://top-fwz1.mail.ru/counter?js=na;id=228158"
height="1" width="1" alt="top.mail.ru" border="0" /></noscript><script language="JavaScript" type="text/javascript"><!--
if(11<js)d.write('--'+'>')//--></script><!--/COUNTER--></noindex><ul class="nav nav-pills">
<li class=""><a href="http://rusnetframework.blogspot.com/">Блог</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/index.php">C#/Visual Basic</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/windowsphone/wp.php">Windows Phone</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/wpf/wpf.php">WPF</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/php">PHP</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/silverlight/silverlight.php">Silverlight</a></li>
<li class="active"><a href="http://developer.alexanderklimov.ru/android">Android</a></li>
<li class=""><a href="http://developer.alexanderklimov.ru/arduino">Arduino</a></li>
</ul>
<div class="container-fluid">
    
	<div class="row-fluid">
        <!--левое меню -->
		<div class="span2">
            <div class="well sidebar-nav">
            <ul class="nav nav-list">
<li class=""><a href="../index-2.html">Главная</a></li>
<li class="active"><a href="index.html">Теория</a></li>
<li class=""><a href="../views.html">Palette</a></li>
<li class=""><a href="../listview/index.html">ListView</a></li>
<li class=""><a href="../catshop/catshop.html">Котошоп</a></li>
<li class=""><a href="../animation.html">Анимация</a></li>
<li class=""><a href="../sqlite/index.html">SQLite</a></li>
<li class=""><a href="../opengles/index.html">OpenGL ES</a></li>
<li class=""><a href="../library/index.html">Библиотеки</a></li>
<li class=""><a href="../games/index.html">Игры</a></li>
<li class=""><a href="../emulator.html">Эмулятор</a></li>
<li class=""><a href="../tips-android.html">Советы</a></li>
<li class=""><a href="../articles-android.html">Статьи</a></li>
<li class=""><a href="../books.html">Книги</a></li>
<li class=""><a href="../java/java.html">Java. Экспресс-курс</a></li>
<li class=""><a href="../design/index.html">Дизайн</a></li>
<li class=""><a href="../opensource.html">Open Source</a></li>
<li class=""><a href="../links.html">Полезные ресурсы</a></li>
</ul>            </div><!--/.well -->
        </div><!--/span-->


        <div class="span8">

		<div class="row-fluid">
            <div class="span12">
			
			            <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h3 id="myModalLabel">Читайте на здоровье!</h3>
            </div>
            <div class="modal-body">
            
              <p>Статья проплачена кошками - всемирно известными производителями котят.</p>

            <p>Если статья вам понравилась, то можете <a href="http://developer.alexanderklimov.ru/donate.php">поддержать проект</a>.</p>
			
			            
            </div>
            <div class="modal-footer">
              <button class="btn" data-dismiss="modal">Закрыть</button>
              
            </div>
          </div>            
<h1 class="text-warning">Виброзвонок</h1>

<p><img src="../images/vibrocat.gif" alt="Кот вибрирует"></p>

<p>
<a href="#permission">Доступ к виброзвонку</a><br>
<a href="#hapticfeedback">Тактильная обратная связь</a><br>
</p>

<h2 class="text-warning">Отступление</h2>

<p>Общеизвестно, что впервые принцип виброзвонка использовали коты. Если приложить руку к коту, то можно почувствовать, что внутри кота работает "моторчик". Конструкторы телефонов решили позаимствовать идею, но авторские отчисления не спешат отчислять.</p>

<p>Британская кошка Смоки из Нортгемптоншира официально попала в Книгу рекордов Гинесса за самое громкое мурлыканье. Представители книги оценили мурлыкание короткошерстной британки в 67.7 децибелов. Рут Адамс, владелица кошки, была в полном восторге, а представитель рассказал, что это просто невероятно, но мурлыканье кошки больше громкости работающего пылесоса.</p>

<iframe width="420" height="315" src="http://www.youtube.com/embed/9GkVK5HTw50?rel=0" frameborder="0" allowfullscreen></iframe>

<h2 class="text-warning" id="permission">Доступ к виброзвонку</h2>

<p>Включение вибрации в устройстве — отличный способ привлечь внимание пользователя посредством тактильного воздействия.</p>

<p>Прежде всего в манифесте необходимо установить  разрешение <b>android.permission.VIBRATE</b>:</p>

<pre><code class="xml">
&lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot;/&gt;
</code></pre>

<p>Далее в коде вызывается системный сервис <b>VIBRATOR_SERVICE</b> для доступа к виброзвонку. После чего можно вызывать требуемые методы:</p>

<p>Например, включить виброрежим на одну секунду</p>

<pre><code class="java">
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

long milliseconds = 1000;
v.vibrate(milliseconds);
</code></pre>

<p>Можно также использовать определенный шаблон, например, 500 миллисекунд на виброзвонок, затем пауза на 300 миллисекунд - комбинацию повторить 5 раз.</p>

<pre><code class="java">
Vibrator v = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

long[] pattern = { 500, 300 };
v.vibrate(pattern, 5);
</code></pre>

<p>Для отмены вибрации используется метод <b>cancel()</b>. Следующий код запускает вибрацию на две секунды при нажатии на кнопку, при отпускании пальца раньше времени вибрация прекращается:</p>

<pre><code class="java">
buttonVibrate.setOnTouchListener(new OnTouchListener(){
    @Override
    public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction();
    
    if(action == MotionEvent.ACTION_DOWN){
        myVibrator.vibrate(2000);
    }else if(action == MotionEvent.ACTION_UP){
        myVibrator.cancel();
    }
    return true;
    }
});
</code></pre>

<p>Неплохо бы также проверить наличие виброзвонка (например, электронная книга не имеет виброзвонка) при помощи метода <b>hasVibrator()</b>.</p>

<p>При выходе из приложения все вибрации, инициированные им, будут отменены.</p>

<h2 class="text-warning" id="hapticfeedback">Тактильная обратная связь</h2>

<p>Возможно вы замечали, что при нажатии на системные клавиши, например, кнопка BACK, система отвечает вам тактильной обратной связью. По сути это тоже включение вибромотора на короткий промежуток времени. Данная функциональность заложена в Настройках - Звук - Обратная связь (для моего телефона Galaxy S2).</p>

<p>Вы можете включить поддержку обратной связи и для своих компонентов в приложении. Обратите внимание, что вам не потребуется устанавливать разрешение на использование вибрации. Это подойдет для тех случаев, когда пользователь страдает паранойей и его пугает список разрешений при установке программы.</p>

<p>Для сравнения добавьте в разметку две кнопки. Первую кнопку оставьте в покое, а у второй пропишите атрибут <b>android:hapticFeedbackEnabled="true"</b>:</p>

<pre><code class="xml">
&lt;Button
    android:id=&quot;@+id/button2&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;wrap_content&quot;
    android:hapticFeedbackEnabled=&quot;true&quot;
    android:onClick=&quot;onClick&quot;
    android:text=&quot;Button2&quot; /&gt;
</code></pre>

<p>Теперь создадим обработчик нажатия кнопки и напишем в нём код:</p>

<pre><code class="java">
public void onClick(View v) {
	Button button2 = (Button) findViewById(R.id.button2);
	button2.performHapticFeedback(HapticFeedbackConstants.VIRTUAL_KEY);
}
</code></pre>

<p>Запускаем пример и поочерёдно нажимаем на две кнопки - почувствуйте разницу.</p>

<p>Поддержку обратной связи можно включить также программно через метод <b>View.setHapticFeedbackEnabled(true)</b>, который является аналогом вышеупомянутого атрибута.</p>

<p>Существуют и другие константы, кроме <b>VIRTUAL_KEY</b>. Но это уже изучайте без меня.</p>

<p>Если на телефоне в настройках отключена обратная связь или вибромотор отсутствует, то данный код не вызовет ошибки, а будет просто проигнорирован (я надеюсь).</p>

<h2 class="text-warning">Вибрация в уведомлениях</h2>

<p>Не забывайте, что вибрацию также можно использовать в <a href="../notification.html#vibrate">уведомлениях</a>.</p>

<h5 class="text-error">Реклама</h5>

<script type="text/javascript"><!--
google_ad_client = "ca-pub-4224968932772057";
/* Полноразмерный баннер 728х90 */
google_ad_slot = "4077523505";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="../../../pagead2.googlesyndication.com/pagead/f.txt">
</script>

</div><!--/span-->
        </div><!--/row-->	
		  
        </div><!--/span-->
		
		<div class="span2">
            <div class="well sidebar-nav">
    <h4><span class="label label-info">Реклама</span></h4>
    <script type="text/javascript"><!--
    google_ad_client = "pub-4224968932772057";
    /* 120x600AlexKlimov */
    google_ad_slot = "0305552138";
    google_ad_width = 120;
    google_ad_height = 600;
    //-->
    </script>
    <script type="text/javascript"
    src="../../../pagead2.googlesyndication.com/pagead/f.txt">
    </script>
</div><!--/.well -->        </div><!--/span-->
		
      </div><!--/row-->
	  
	
      <hr>
	  
	  	  <div class="row-fluid">
	  <div class="span12">
	  <img src="../../images/cat_bottom.png" align="right" />
</div><!--/span-->
        </div><!--/row-->

<footer>
    <noindex>
    <span style="float:left; margin:3px 1px 1px 2px;">
	    © 2014 <a href="mailto:rusproject@mail.ru">А.Климов</a>
		
		<!-- Place this code where you want the badge to render. -->
<a href="http://plus.google.com/109061106977829925124?prsrc=3" rel="publisher" style="text-decoration:none;">
<img src="../../../ssl.gstatic.com/images/icons/gplus-16.png" alt="Google+" style="border:0;width:16px;height:16px;"/></a>

    </span>
	
		<span style="float: right; margin:3px 5px 1px 1px; font-size:22px;">
        <!--Rating@Mail.ru LOGO--><a target=_top
        href="http://top.mail.ru/jump?from=228158"><img
        SRC="http://top-fwz1.mail.ru/counter?id=228158;t=223;l=1"
        border=0 height=31 width=88
        alt="Рейтинг@Mail.ru"/></a><!--/LOGO-->
	</span>
    
    <span style="float: right; margin:2px 70px 1px 1px; font-size:22px;">
        <a href="http://feeds.feedburner.com/alexanderklimov/VJcl"><img src="../../../feeds.feedburner.com/_fc/alexanderklimov/VJcle080.gif?bg=0099CC&amp;fg=444444&amp;anim=0" height="26" width="88" style="border:0" alt="" /></a>
	</span>
	
<div style="float: right; margin:2px 70px 1px 1px;">
<!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone" data-size="small" data-annotation="inline" data-width="300" data-align="right" ></div>

</div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  window.___gcfg = {lang: 'ru'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = '../../../apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script>
	

    </noindex>
</footer>

</div><!--/.fluid-container-->
    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="../../assets/js/jquery.js"></script>
    <script src="../../assets/js/bootstrap-transition.js"></script>
    <script src="../../assets/js/bootstrap-alert.js"></script>
    <script src="../../assets/js/bootstrap-modal.js"></script>
    <script src="../../assets/js/bootstrap-dropdown.js"></script>
    <script src="../../assets/js/bootstrap-scrollspy.js"></script>
    <script src="../../assets/js/bootstrap-tab.js"></script>
    <script src="../../assets/js/bootstrap-tooltip.js"></script>
    <script src="../../assets/js/bootstrap-popover.js"></script>
    <script src="../../assets/js/bootstrap-button.js"></script>
    <script src="../../assets/js/bootstrap-collapse.js"></script>
    <script src="../../assets/js/bootstrap-carousel.js"></script>
    <script src="../../assets/js/bootstrap-typeahead.js"></script>
    <script src="../../../code.jquery.com/jquery-1.7.min.js"></script>
</body>

<!-- Mirrored from developer.alexanderklimov.ru/android/theory/vibrator.php by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 16 Jul 2014 14:51:58 GMT -->
</html>